## Deploy

В этой части добавляем последний шаг - деплой приложения на хост с Docker. Деплой производится с выполнением команд с gitlab-runner на стенде по SSH. 

**1. Подготавливаем ci/cd**

Для этого скопируем `.gitlab-ci.yml` в проект `docker-xpaste`, выполнив команду:

```bash
cp ~/docker-2020/7.ci-cd/1.2.deploy/.gitlab-ci.yml ~/docker-xpaste/
```
В нём ничего править не нужно, все значения будут использоваться из переменных в Gitlab.

Сохраняем все изменения и пушим их в репозиторий. Для этого необходимо выполнить команды:
```bash
cd ~/docker-xpaste
git add .
git commit -am "аdd CI/CD to repo"
git push
```

**2. Проверка результата**

Для проверки результата необходимо перейти в gitlab в раздел `ci/cd -> pipelines` форка проекта docker-xpaste. 
Можно воспользоваться прямой ссылкой: `https://gitlab.slurm.io/sXXXXXX/docker-xpaste/pipelines`. `sXXXXXX` необходимо заменить на номер своего студента.

В результате все 5 job'ов должны закончиться без ошибок.

**3.Открываем приложение в браузере**

В браузере открываем url: xpaste.s<Ваш номер логина>.edu.slurm.io. `<Ваш номер логина>` необходимо заменить на номер своего студента. Открывать лучше в режиме `инкогнито`, так как современные браузеры без спроса подставляют https:// и потом это запоминают как единственно верный вариант.

Всё готово! Вы только что автоматизировали сборку, тестирование и деплой приложения при помощи Docker и Gitlab.
